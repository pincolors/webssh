{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport { checkSSH } from '@/api/common';\nimport { Terminal } from 'xterm';\nimport { FitAddon } from 'xterm-addon-fit';\nimport { AttachAddon } from 'xterm-addon-attach';\nimport FileList from '@/components/FileList';\nexport default {\n  name: 'Terminal',\n  components: {\n    FileList\n  },\n  data() {\n    return {\n      term: null,\n      ws: null,\n      resetClose: false,\n      ssh: null,\n      savePass: false,\n      fontSize: 15,\n      isSftpVisible: false\n    };\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.createTerm();\n    });\n  },\n  methods: {\n    toggleSftpPanel() {\n      this.isSftpVisible = !this.isSftpVisible;\n    },\n    setSSH() {\n      this.$store.commit('SET_SSH', this.ssh);\n    },\n    resizeTerm() {\n      // This is now handled by CSS flexbox and xterm's fit-addon.\n      // The logic is kept here in case of future need.\n    },\n    createTerm() {\n      const sshInfo = this.$store.state.sshInfo;\n      if (!sshInfo || !sshInfo.hostname) {\n        this.$message.error('无效的连接信息！正在返回登录页...');\n        this.$router.push('/');\n        return;\n      }\n      const termWeb = document.getElementById('xterm-container');\n      if (!termWeb) {\n        console.error('Terminal container #xterm-container not found.');\n        return;\n      }\n      const sshReq = this.$store.getters.sshReq;\n      this.close();\n      const prefix = process.env.NODE_ENV === 'production' ? '' : '/api';\n      const fitAddon = new FitAddon();\n      this.term = new Terminal({\n        cursorBlink: true,\n        cursorStyle: 'bar',\n        cursorWidth: 4,\n        fontFamily: 'DejaVu Sans Mono, monospace',\n        // 设置字体\n        fontSize: this.fontSize,\n        // 字号\n        theme: {\n          background: '#000000',\n          // 背景色\n          foreground: '#ffffff',\n          // 字体颜色\n          cursor: '#ffffff',\n          // 光标颜色\n          selection: '#daffe77a',\n          // 选中区域颜色\n          blue: '#1981ff',\n          // 蓝色\n          brightMagenta: '#e879f9',\n          // 紫色\n          brightBlue: '#6eb0ff' // 亮蓝色\n        }\n      });\n      this.term.loadAddon(fitAddon);\n      this.term.open(document.getElementById('xterm-container'));\n      this.term.focus();\n      this.term.write('\\x1b[1;1H\\x1b[1;32m正在连接，请稍后...\\x1b[0m\\r\\n');\n      try {\n        fitAddon.fit();\n      } catch (e) {/**/}\n      const self = this;\n      const heartCheck = {\n        timeout: 5000,\n        // 5s发一次心跳\n        intervalObj: null,\n        stop: function () {\n          clearInterval(this.intervalObj);\n        },\n        start: function () {\n          this.intervalObj = setInterval(function () {\n            if (self.ws !== null && self.ws.readyState === 1) {\n              self.ws.send('ping');\n            }\n          }, this.timeout);\n        }\n      };\n      let closeTip = '已超时关闭!';\n      if (this.$store.state.language === 'en') {\n        closeTip = 'Connection timed out!';\n      }\n      // open websocket\n      this.ws = new WebSocket(`${location.protocol === 'http:' ? 'ws' : 'wss'}://${location.host}${prefix}/term?sshInfo=${sshReq}&rows=${this.term.rows}&cols=${this.term.cols}&closeTip=${closeTip}`);\n      this.ws.onopen = () => {\n        console.log(Date(), 'onopen');\n        self.connected();\n        heartCheck.start();\n        self._initCmdSent = false;\n      };\n      // 监听ws消息，检测到提示符再自动执行初始命令并清理提示\n      this.ws.onmessage = event => {\n        if (typeof event.data === 'string') {\n          // We need to wait for the attach addon to process the data and write it to the terminal.\n          // A timeout of 0ms should be enough to push this to the end of the execution queue.\n          setTimeout(() => {\n            if (!self._initCmdSent && self.ssh) {\n              const term = self.term;\n              if (!term || !term.buffer || !term.buffer.active) return;\n              const currentLineNumber = term.buffer.active.baseY + term.buffer.active.cursorY;\n              const line = term.buffer.active.getLine(currentLineNumber);\n              if (line) {\n                const lineText = line.translateToString();\n                // More robust regex to detect various shell prompts at the end of the line\n                if (/[>$#%]\\s*$/.test(lineText.trimEnd())) {\n                  self._initCmdSent = true;\n                  // This ANSI sequence saves cursor, moves to 1,1, clears line, and restores cursor\n                  self.term.write('\\x1b[s\\x1b[1;1H\\x1b[2K\\x1b[u');\n                  if (self.ssh.command) {\n                    setTimeout(() => {\n                      if (self.ws && self.ws.readyState === 1) {\n                        self.ws.send(self.ssh.command + '\\r'); // 让后端执行命令\n                      }\n                    }, 100);\n                  }\n                }\n              }\n            }\n          }, 10);\n        }\n      };\n      this.ws.onclose = () => {\n        console.log(Date(), 'onclose');\n        if (!self.resetClose) {\n          if (self.ssh && !this.savePass) {\n            this.$store.commit('SET_PASS', '');\n            self.ssh.password = '';\n          }\n          this.$message({\n            message: this.$t('wsClose'),\n            type: 'warning',\n            duration: 0,\n            showClose: true\n          });\n          this.ws = null;\n        }\n        heartCheck.stop();\n        self.resetClose = false;\n        if (self.ws !== null && self.ws.readyState === 1) {\n          self.ws.send(`resize:${self.term.rows}:${self.term.cols}`);\n        }\n      };\n      this.ws.onerror = () => {\n        console.log(Date(), 'onerror');\n      };\n      const attachAddon = new AttachAddon(this.ws, {\n        bidirectional: false\n      });\n      this.term.loadAddon(attachAddon);\n\n      // 恢复终端输入到ws\n      this.term.onData(data => {\n        if (self.ws && self.ws.readyState === 1) {\n          self.ws.send(data);\n        }\n      });\n      this.term.attachCustomKeyEventHandler(e => {\n        const keyArray = ['F5', 'F11', 'F12'];\n        if (keyArray.indexOf(e.key) > -1) {\n          return false;\n        }\n        // ctrl + v\n        if (e.ctrlKey && e.key === 'v') {\n          document.execCommand('copy');\n          return false;\n        }\n        // ctrl + c\n        if (e.ctrlKey && e.key === 'c' && self.term.hasSelection()) {\n          document.execCommand('copy');\n          return false;\n        }\n      });\n      // detect available wheel event\n      // 各个厂商的高版本浏览器都支持\"wheel\"\n      // Webkit 和 IE一定支持\"mousewheel\"\n      // \"DOMMouseScroll\" 用于低版本的firefox\n      const wheelSupport = 'onwheel' in document.createElement('div') ? 'wheel' : document.onmousewheel !== undefined ? 'mousewheel' : 'DOMMouseScroll';\n      termWeb.addEventListener(wheelSupport, e => {\n        if (e.ctrlKey) {\n          e.preventDefault();\n          if (e.deltaY < 0) {\n            self.term.setOption('fontSize', ++this.fontSize);\n          } else {\n            self.term.setOption('fontSize', --this.fontSize);\n          }\n          try {\n            fitAddon.fit();\n          } catch (e) {/**/}\n          if (self.ws !== null && self.ws.readyState === 1) {\n            self.ws.send(`resize:${self.term.rows}:${self.term.cols}`);\n          }\n        }\n      });\n      window.addEventListener('resize', () => {\n        try {\n          fitAddon.fit();\n        } catch (e) {/**/}\n        if (self.ws !== null && self.ws.readyState === 1) {\n          self.ws.send(`resize:${self.term.rows}:${self.term.cols}`);\n        }\n      });\n    },\n    async connected() {\n      const sshInfo = this.$store.state.sshInfo;\n      // 深度拷贝对象\n      this.ssh = Object.assign({}, sshInfo);\n      // 校验ssh连接信息是否正确\n      const result = await checkSSH(this.$store.getters.sshReq);\n      if (result.Msg !== 'success') {\n        return;\n      } else {\n        this.savePass = result.Data.savePass;\n      }\n      document.title = sshInfo.hostname;\n      let sshList = this.$store.state.sshList;\n      if (sshList === null) {\n        if (this.savePass) {\n          sshList = `[{\"hostname\": \"${sshInfo.hostname}\", \"username\": \"${sshInfo.username}\", \"port\":${sshInfo.port}, \"logintype\":${sshInfo.logintype}, \"password\":\"${sshInfo.password}\"}]`;\n        } else {\n          sshList = `[{\"hostname\": \"${sshInfo.hostname}\", \"username\": \"${sshInfo.username}\", \"port\":${sshInfo.port},  \"logintype\":${sshInfo.logintype}}]`;\n        }\n      } else {\n        const sshListObj = JSON.parse(window.atob(sshList));\n        sshListObj.forEach((v, i) => {\n          if (v.hostname === sshInfo.hostname) {\n            sshListObj.splice(i, 1);\n          }\n        });\n        sshListObj.push({\n          hostname: sshInfo.hostname,\n          username: sshInfo.username,\n          port: sshInfo.port,\n          logintype: sshInfo.logintype\n        });\n        if (this.savePass) {\n          sshListObj[sshListObj.length - 1].password = sshInfo.password;\n        }\n        sshList = JSON.stringify(sshListObj);\n      }\n      this.$store.commit('SET_LIST', window.btoa(sshList));\n    },\n    close() {\n      if (this.ws !== null) {\n        this.ws.close();\n        this.resetClose = true;\n      }\n      if (this.term !== null) {\n        this.term.dispose();\n      }\n    }\n  },\n  beforeDestroy() {\n    this.close();\n  }\n};","map":{"version":3,"names":["checkSSH","Terminal","FitAddon","AttachAddon","FileList","name","components","data","term","ws","resetClose","ssh","savePass","fontSize","isSftpVisible","mounted","$nextTick","createTerm","methods","toggleSftpPanel","setSSH","$store","commit","resizeTerm","sshInfo","state","hostname","$message","error","$router","push","termWeb","document","getElementById","console","sshReq","getters","close","prefix","process","env","NODE_ENV","fitAddon","cursorBlink","cursorStyle","cursorWidth","fontFamily","theme","background","foreground","cursor","selection","blue","brightMagenta","brightBlue","loadAddon","open","focus","write","fit","e","self","heartCheck","timeout","intervalObj","stop","clearInterval","start","setInterval","readyState","send","closeTip","language","WebSocket","location","protocol","host","rows","cols","onopen","log","Date","connected","_initCmdSent","onmessage","event","setTimeout","buffer","active","currentLineNumber","baseY","cursorY","line","getLine","lineText","translateToString","test","trimEnd","command","onclose","password","message","$t","type","duration","showClose","onerror","attachAddon","bidirectional","onData","attachCustomKeyEventHandler","keyArray","indexOf","key","ctrlKey","execCommand","hasSelection","wheelSupport","createElement","onmousewheel","undefined","addEventListener","preventDefault","deltaY","setOption","window","Object","assign","result","Msg","Data","title","sshList","username","port","logintype","sshListObj","JSON","parse","atob","forEach","v","i","splice","length","stringify","btoa","dispose","beforeDestroy"],"sources":["C:\\Users\\Adam\\Desktop\\wssh\\webssh\\frontend\\src\\components\\Terminal.vue"],"sourcesContent":["<template>\r\n  <div class=\"terminal-page-wrapper\">\r\n    <div class=\"terminal-page-container\">\r\n      <div class=\"terminal-area\">\r\n        <div id=\"xterm-container\"></div>\r\n      </div>\r\n      <div class=\"file-tree\" :class=\"{ 'is-visible': isSftpVisible }\">\r\n        <FileList />\r\n      </div>\r\n    </div>\r\n    <div class=\"terminal-footer\">\r\n    \r\n      <a href=\"https://github.com/adamj001/webssh-lw\" target=\"_blank\" class=\"github-link\" title=\"GitHub\">\r\n        <i class=\"fab fa-github\"></i>\r\n      </a>\r\n      <button @click=\"toggleSftpPanel\" class=\"sftp-toggle-btn\" title=\"文件管理\">\r\n        <i class=\"fas fa-folder-open\" style=\"margin-left: 15px;\"></i>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { checkSSH } from '@/api/common'\r\nimport { Terminal } from 'xterm'\r\nimport { FitAddon } from 'xterm-addon-fit'\r\nimport { AttachAddon } from 'xterm-addon-attach'\r\nimport FileList from '@/components/FileList'\r\n\r\nexport default {\r\n    name: 'Terminal',\r\n    components: { FileList },\r\n    data() {\r\n        return {\r\n            term: null,\r\n            ws: null,\r\n            resetClose: false,\r\n            ssh: null,\r\n            savePass: false,\r\n            fontSize: 15,\r\n            isSftpVisible: false\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$nextTick(() => {\r\n            this.createTerm()\r\n        })\r\n    },\r\n    methods: {\r\n        toggleSftpPanel() {\r\n            this.isSftpVisible = !this.isSftpVisible\r\n        },\r\n        setSSH() {\r\n            this.$store.commit('SET_SSH', this.ssh)\r\n        },\r\n        resizeTerm() {\r\n            // This is now handled by CSS flexbox and xterm's fit-addon.\r\n            // The logic is kept here in case of future need.\r\n        },\r\n        createTerm() {\r\n            const sshInfo = this.$store.state.sshInfo;\r\n            if (!sshInfo || !sshInfo.hostname) {\r\n                this.$message.error('无效的连接信息！正在返回登录页...')\r\n                this.$router.push('/')\r\n                return\r\n            }\r\n            const termWeb = document.getElementById('xterm-container')\r\n            if (!termWeb) {\r\n                console.error('Terminal container #xterm-container not found.')\r\n                return\r\n            }\r\n            const sshReq = this.$store.getters.sshReq\r\n            this.close()\r\n            const prefix = process.env.NODE_ENV === 'production' ? '' : '/api'\r\n            const fitAddon = new FitAddon()\r\n            this.term = new Terminal({\r\n                cursorBlink: true,\r\n                cursorStyle: 'bar',\r\n                cursorWidth: 4,\r\n                fontFamily: 'DejaVu Sans Mono, monospace',  // 设置字体\r\n                fontSize: this.fontSize,            // 字号\r\n                theme: {\r\n                    background: '#000000',          // 背景色\r\n                    foreground: '#ffffff',          // 字体颜色\r\n                    cursor: '#ffffff',              // 光标颜色\r\n                    selection: '#daffe77a',         // 选中区域颜色\r\n                    blue: '#1981ff',                // 蓝色\r\n                    brightMagenta: '#e879f9',       // 紫色\r\n                    brightBlue: '#6eb0ff',          // 亮蓝色\r\n                }\r\n            })\r\n            this.term.loadAddon(fitAddon)\r\n            this.term.open(document.getElementById('xterm-container'))\r\n            this.term.focus()\r\n            this.term.write('\\x1b[1;1H\\x1b[1;32m正在连接，请稍后...\\x1b[0m\\r\\n')\r\n            try { fitAddon.fit() } catch (e) {/**/}\r\n            const self = this\r\n            const heartCheck = {\r\n                timeout: 5000, // 5s发一次心跳\r\n                intervalObj: null,\r\n                stop: function() {\r\n                    clearInterval(this.intervalObj)\r\n                },\r\n                start: function() {\r\n                    this.intervalObj = setInterval(function() {\r\n                        if (self.ws !== null && self.ws.readyState === 1) {\r\n                            self.ws.send('ping')\r\n                        }\r\n                    }, this.timeout)\r\n                }\r\n            }\r\n            let closeTip = '已超时关闭!'\r\n            if (this.$store.state.language === 'en') {\r\n                closeTip = 'Connection timed out!'\r\n            }\r\n            // open websocket\r\n            this.ws = new WebSocket(`${(location.protocol === 'http:' ? 'ws' : 'wss')}://${location.host}${prefix}/term?sshInfo=${sshReq}&rows=${this.term.rows}&cols=${this.term.cols}&closeTip=${closeTip}`)\r\n            this.ws.onopen = () => {\r\n                console.log(Date(), 'onopen')\r\n                self.connected()\r\n                heartCheck.start()\r\n                self._initCmdSent = false\r\n            }\r\n            // 监听ws消息，检测到提示符再自动执行初始命令并清理提示\r\n            this.ws.onmessage = (event) => {\r\n                if (typeof event.data === 'string') {\r\n                    // We need to wait for the attach addon to process the data and write it to the terminal.\r\n                    // A timeout of 0ms should be enough to push this to the end of the execution queue.\r\n                    setTimeout(() => {\r\n                        if (!self._initCmdSent && self.ssh) {\r\n                            const term = self.term;\r\n                            if (!term || !term.buffer || !term.buffer.active) return;\r\n\r\n                            const currentLineNumber = term.buffer.active.baseY + term.buffer.active.cursorY;\r\n                            const line = term.buffer.active.getLine(currentLineNumber);\r\n                            if (line) {\r\n                                const lineText = line.translateToString();\r\n                                // More robust regex to detect various shell prompts at the end of the line\r\n                                if (/[>$#%]\\s*$/.test(lineText.trimEnd())) {\r\n                                    self._initCmdSent = true;\r\n                                    // This ANSI sequence saves cursor, moves to 1,1, clears line, and restores cursor\r\n                                    self.term.write('\\x1b[s\\x1b[1;1H\\x1b[2K\\x1b[u');\r\n                                    if (self.ssh.command) {\r\n                                        setTimeout(() => {\r\n                                            if (self.ws && self.ws.readyState === 1) {\r\n                                                self.ws.send(self.ssh.command + '\\r'); // 让后端执行命令\r\n                                            }\r\n                                        }, 100);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }, 10);\r\n                }\r\n            }\r\n            this.ws.onclose = () => {\r\n                console.log(Date(), 'onclose')\r\n                if (!self.resetClose) {\r\n                    if (self.ssh && !this.savePass) {\r\n                        this.$store.commit('SET_PASS', '')\r\n                        self.ssh.password = ''\r\n                    }\r\n                    this.$message({\r\n                        message: this.$t('wsClose'),\r\n                        type: 'warning',\r\n                        duration: 0,\r\n                        showClose: true\r\n                    })\r\n                    this.ws = null\r\n                }\r\n                heartCheck.stop()\r\n                self.resetClose = false\r\n                if (self.ws !== null && self.ws.readyState === 1) {\r\n                    self.ws.send(`resize:${self.term.rows}:${self.term.cols}`)\r\n                }\r\n            }\r\n            this.ws.onerror = () => {\r\n                console.log(Date(), 'onerror')\r\n            }\r\n            const attachAddon = new AttachAddon(this.ws, { bidirectional: false })\r\n            this.term.loadAddon(attachAddon)\r\n\r\n            // 恢复终端输入到ws\r\n            this.term.onData(data => {\r\n                if (self.ws && self.ws.readyState === 1) {\r\n                    self.ws.send(data)\r\n                }\r\n            })\r\n\r\n            this.term.attachCustomKeyEventHandler((e) => {\r\n                const keyArray = ['F5', 'F11', 'F12']\r\n                if (keyArray.indexOf(e.key) > -1) {\r\n                    return false\r\n                }\r\n                // ctrl + v\r\n                if (e.ctrlKey && e.key === 'v') {\r\n                    document.execCommand('copy')\r\n                    return false\r\n                }\r\n                // ctrl + c\r\n                if (e.ctrlKey && e.key === 'c' && self.term.hasSelection()) {\r\n                    document.execCommand('copy')\r\n                    return false\r\n                }\r\n            })\r\n            // detect available wheel event\r\n            // 各个厂商的高版本浏览器都支持\"wheel\"\r\n            // Webkit 和 IE一定支持\"mousewheel\"\r\n            // \"DOMMouseScroll\" 用于低版本的firefox\r\n            const wheelSupport = 'onwheel' in document.createElement('div') ? 'wheel' : document.onmousewheel !== undefined ? 'mousewheel' : 'DOMMouseScroll'\r\n            termWeb.addEventListener(wheelSupport, (e) => {\r\n                if (e.ctrlKey) {\r\n                    e.preventDefault()\r\n                    if (e.deltaY < 0) {\r\n                        self.term.setOption('fontSize', ++this.fontSize)\r\n                    } else {\r\n                        self.term.setOption('fontSize', --this.fontSize)\r\n                    }\r\n                    try { fitAddon.fit() } catch (e) {/**/}\r\n                    if (self.ws !== null && self.ws.readyState === 1) {\r\n                        self.ws.send(`resize:${self.term.rows}:${self.term.cols}`)\r\n                    }\r\n                }\r\n            })\r\n            window.addEventListener('resize', () => {\r\n                try { fitAddon.fit() } catch (e) {/**/}\r\n                if (self.ws !== null && self.ws.readyState === 1) {\r\n                    self.ws.send(`resize:${self.term.rows}:${self.term.cols}`)\r\n                }\r\n            })\r\n        },\r\n        async connected() {\r\n            const sshInfo = this.$store.state.sshInfo\r\n            // 深度拷贝对象\r\n            this.ssh = Object.assign({}, sshInfo)\r\n            // 校验ssh连接信息是否正确\r\n            const result = await checkSSH(this.$store.getters.sshReq)\r\n            if (result.Msg !== 'success') {\r\n                return\r\n            } else {\r\n                this.savePass = result.Data.savePass\r\n            }\r\n            document.title = sshInfo.hostname\r\n            let sshList = this.$store.state.sshList\r\n            if (sshList === null) {\r\n                if (this.savePass) {\r\n                    sshList = `[{\"hostname\": \"${sshInfo.hostname}\", \"username\": \"${sshInfo.username}\", \"port\":${sshInfo.port}, \"logintype\":${sshInfo.logintype}, \"password\":\"${sshInfo.password}\"}]`\r\n                } else {\r\n                    sshList = `[{\"hostname\": \"${sshInfo.hostname}\", \"username\": \"${sshInfo.username}\", \"port\":${sshInfo.port},  \"logintype\":${sshInfo.logintype}}]`\r\n                }\r\n            } else {\r\n                const sshListObj = JSON.parse(window.atob(sshList))\r\n                sshListObj.forEach((v, i) => {\r\n                    if (v.hostname === sshInfo.hostname) {\r\n                        sshListObj.splice(i, 1)\r\n                    }\r\n                })\r\n                sshListObj.push({\r\n                    hostname: sshInfo.hostname,\r\n                    username: sshInfo.username,\r\n                    port: sshInfo.port,\r\n                    logintype: sshInfo.logintype\r\n                })\r\n                if (this.savePass) {\r\n                    sshListObj[sshListObj.length - 1].password = sshInfo.password\r\n                }\r\n                sshList = JSON.stringify(sshListObj)\r\n            }\r\n            this.$store.commit('SET_LIST', window.btoa(sshList))\r\n        },\r\n        close() {\r\n            if (this.ws !== null) {\r\n                this.ws.close()\r\n                this.resetClose = true\r\n            }\r\n            if (this.term !== null) {\r\n                this.term.dispose()\r\n            }\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        this.close()\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.terminal-page-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1; /* This will make it fill the space given by App.vue */\r\n  min-height: 0; /* Prevents overflow issues */\r\n  background: var(--card-bg);\r\n  box-shadow: var(--shadow);\r\n}\r\n\r\n.terminal-page-container {\r\n  display: flex;\r\n  flex-grow: 1;\r\n  min-height: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.terminal-area {\r\n  flex: 1;\r\n  min-width: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: black;\r\n}\r\n\r\n#xterm-container {\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  padding-left: 2px;\r\n}\r\n\r\n.file-tree {\r\n  width: 350px;\r\n  border-left: 1px solid var(--input-border);\r\n  background: var(--input-bg);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.terminal-footer {\r\n  width: 100%;\r\n  margin-left: -3rem;\r\n  text-align: center;\r\n  padding: 8px 0 6px 0;\r\n  font-size: 15px;\r\n  color: #0e0e0e;\r\n  background: var(--card-bg);\r\n  border-top: 1px solid var(--input-border);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.github-link {\r\n  color: #0e0e0e;\r\n  margin-left: 4px;\r\n  font-size: 18px;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.github-link:hover {\r\n  color: var(--text-primary);\r\n}\r\n\r\n.sftp-toggle-btn {\r\n  display: none;\r\n  background: none;\r\n  border: none;\r\n  color: #0e0e0e;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n}\r\n\r\n.sftp-toggle-btn:hover {\r\n  color: var(--text-primary);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .sftp-toggle-btn {\r\n    display: inline-block;\r\n  }\r\n\r\n  .terminal-page-container {\r\n    position: relative;\r\n    overflow: hidden; /* Contain the sliding panel */\r\n  }\r\n\r\n  .file-tree {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: 85%;\r\n    max-width: 350px;\r\n    transform: translateX(100%);\r\n    transition: transform 0.3s ease-in-out;\r\n    z-index: 20;\r\n    border-left: none;\r\n    box-shadow: -2px 0 10px rgba(0,0,0,0.15);\r\n  }\r\n\r\n  .file-tree.is-visible {\r\n    transform: translateX(0);\r\n  }\r\n\r\n  .terminal-footer {\r\n    margin-left: 0;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}