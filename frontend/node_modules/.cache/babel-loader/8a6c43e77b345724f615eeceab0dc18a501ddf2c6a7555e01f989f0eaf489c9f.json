{"ast":null,"code":"import { fileList } from '@/api/file';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'FileList',\n  data() {\n    return {\n      uploadVisible: false,\n      fileList: [],\n      downloadFilePath: '',\n      currentPath: '/',\n      selectTip: 'clickSelectFile',\n      titleTip: 'uploadFile',\n      uploadTip: '',\n      progressPercent: 0,\n      initialRedirectDone: false,\n      homePath: ''\n    };\n  },\n  mounted() {\n    // 组件挂载时，currentPath 为空或/，自动拉取\n    if (!this.currentPath || this.currentPath === '/') {\n      this.getFileList();\n    }\n  },\n  computed: {\n    ...mapState(['currentTab']),\n    // currentTab may be deprecated but keeping for now\n    sshInfoReady() {\n      return this.$store.state.sshInfo && this.$store.state.sshInfo.hostname;\n    },\n    uploadUrl: () => {\n      return `${process.env.NODE_ENV === 'production' ? `${location.origin}` : 'api'}/file/upload`;\n    },\n    uploadData: function () {\n      return {\n        sshInfo: this.$store.getters.sshReq,\n        path: this.currentPath\n      };\n    }\n  },\n  watch: {\n    // Watch for sshInfo to become available\n    sshInfoReady(newValue, oldValue) {\n      if (newValue && !oldValue) {\n        this.getFileList();\n      }\n    },\n    currentTab: function () {\n      // This logic might need adjustment if multi-tab is re-enabled\n      this.fileList = [];\n      this.currentPath = this.currentTab && this.currentTab.path ? this.currentTab.path : '/';\n    }\n  },\n  methods: {\n    goToHome() {\n      if (this.homePath) {\n        if (this.currentPath !== this.homePath) {\n          this.currentPath = this.homePath;\n          this.getFileList();\n        }\n      } else {\n        this.$message.warning('主目录信息尚不可用，请刷新重试。');\n      }\n    },\n    openUploadDialog() {\n      this.uploadTip = `${this.$t('uploadPath')}: ${this.currentPath}`;\n      this.uploadVisible = true;\n    },\n    handleUploadCommand(cmd) {\n      if (cmd === 'folder') {\n        this.selectTip = 'clickSelectFolder';\n        this.titleTip = 'uploadFolder';\n      } else {\n        this.selectTip = 'clickSelectFile';\n        this.titleTip = 'uploadFile';\n      }\n      this.openUploadDialog();\n      const isFolder = 'folder' === cmd,\n        supported = this.webkitdirectorySupported();\n      if (!supported) {\n        isFolder && this.$message.warning('当前浏览器不支持');\n        return;\n      }\n      // Add folder support\n      this.$nextTick(() => {\n        const input = document.getElementsByClassName('el-upload__input')[0];\n        if (input) input.webkitdirectory = isFolder;\n      });\n    },\n    webkitdirectorySupported() {\n      return 'webkitdirectory' in document.createElement('input');\n    },\n    beforeUpload(file) {\n      this.uploadTip = `${this.$t('uploading')} ${file.name} ${this.$t('to')} ${this.currentPath}, ${this.$t('notCloseWindows')}..`;\n      this.uploadData.id = file.uid;\n      // Is there a folder?\n      const dirPath = file.webkitRelativePath;\n      this.uploadData.dir = dirPath ? dirPath.substring(0, dirPath.lastIndexOf('/')) : '';\n      return true;\n    },\n    uploadSuccess(r, file) {\n      this.uploadTip = `${file.name}${this.$t('uploadFinish')}!`;\n      this.getFileList();\n    },\n    uploadProgress(e, f) {\n      e.percent = e.percent / 2;\n      f.percentage = f.percentage / 2;\n      if (e.percent === 50) {\n        const ws = new WebSocket(`${location.protocol === 'http:' ? 'ws' : 'wss'}://${location.host}${process.env.NODE_ENV === 'production' ? '' : '/ws'}/file/progress?id=${f.uid}`);\n        ws.onmessage = e1 => {\n          f.percentage = (f.size + Number(e1.data)) / (f.size * 2) * 100;\n        };\n        ws.onclose = () => {\n          console.log(Date(), 'onclose');\n        };\n        ws.onerror = () => {\n          console.log(Date(), 'onerror');\n        };\n      }\n    },\n    nameSort(a, b) {\n      return a.Name > b.Name;\n    },\n    rowClick(row) {\n      if (row.IsDir) {\n        // Folder handling\n        this.currentPath = this.currentPath.charAt(this.currentPath.length - 1) === '/' ? this.currentPath + row.Name : this.currentPath + '/' + row.Name;\n        this.getFileList();\n      } else {\n        // File handling\n        this.downloadFilePath = this.currentPath.charAt(this.currentPath.length - 1) === '/' ? this.currentPath + row.Name : this.currentPath + '/' + row.Name;\n        this.downloadFile();\n      }\n    },\n    async getFileList() {\n      this.currentPath = this.currentPath.replace(/\\\\+/g, '/');\n      if (this.currentPath === '') {\n        this.currentPath = '/';\n      }\n      const result = await fileList(this.currentPath, this.$store.getters.sshReq);\n      if (result.Msg === 'success') {\n        if (result.Data.home) {\n          this.homePath = result.Data.home;\n        }\n        if (result.Data.list === null) {\n          this.fileList = [];\n        } else {\n          this.fileList = result.Data.list;\n        }\n        // 只要后端返回的home和当前路径不同且home不为/，就切换 (仅执行一次)\n        if (!this.initialRedirectDone && result.Data.home && result.Data.home !== '/' && this.currentPath !== result.Data.home) {\n          this.initialRedirectDone = true;\n          this.currentPath = result.Data.home;\n          await this.getFileList();\n          return;\n        }\n      } else {\n        this.fileList = [];\n        this.$message({\n          message: result.Msg,\n          type: 'error',\n          duration: 3000\n        });\n      }\n    },\n    upDirectory() {\n      if (this.currentPath === '/') {\n        return;\n      }\n      let pathList = this.currentPath.split('/');\n      if (pathList[pathList.length - 1] === '') {\n        pathList = pathList.slice(0, pathList.length - 2);\n      } else {\n        pathList = pathList.slice(0, pathList.length - 1);\n      }\n      this.currentPath = pathList.length === 1 ? '/' : pathList.join('/');\n      this.getFileList();\n    },\n    downloadFile() {\n      const prefix = process.env.NODE_ENV === 'production' ? `${location.origin}` : 'api';\n      const downloadUrl = `${prefix}/file/download?path=${this.downloadFilePath}&sshInfo=${this.$store.getters.sshReq}`;\n      window.open(downloadUrl);\n    }\n  }\n};","map":{"version":3,"names":["fileList","mapState","name","data","uploadVisible","downloadFilePath","currentPath","selectTip","titleTip","uploadTip","progressPercent","initialRedirectDone","homePath","mounted","getFileList","computed","sshInfoReady","$store","state","sshInfo","hostname","uploadUrl","process","env","NODE_ENV","location","origin","uploadData","getters","sshReq","path","watch","newValue","oldValue","currentTab","methods","goToHome","$message","warning","openUploadDialog","$t","handleUploadCommand","cmd","isFolder","supported","webkitdirectorySupported","$nextTick","input","document","getElementsByClassName","webkitdirectory","createElement","beforeUpload","file","id","uid","dirPath","webkitRelativePath","dir","substring","lastIndexOf","uploadSuccess","r","uploadProgress","e","f","percent","percentage","ws","WebSocket","protocol","host","onmessage","e1","size","Number","onclose","console","log","Date","onerror","nameSort","a","b","Name","rowClick","row","IsDir","charAt","length","downloadFile","replace","result","Msg","Data","home","list","message","type","duration","upDirectory","pathList","split","slice","join","prefix","downloadUrl","window","open"],"sources":["C:\\Users\\Adam\\Desktop\\wssh\\webssh\\frontend\\src\\components\\FileList.vue"],"sourcesContent":["<template>\r\n    <div class=\"file-list-wrapper\">\r\n        <div class=\"sftp-title\">SFTP文件管理</div>\r\n        <div class=\"file-header\">\r\n            <el-input class=\"path-input\" v-model=\"currentPath\" size=\"small\" @keyup.enter.native=\"getFileList()\" @blur=\"getFileList\" placeholder=\"当前路径...\"></el-input>\r\n            <el-button-group>\r\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-s-home\" @click=\"goToHome()\" title=\"主目录\"></el-button>\r\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-arrow-up\" @click=\"upDirectory()\" title=\"返回上级目录\"></el-button>\r\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-refresh\" @click=\"getFileList()\" title=\"刷新当前目录\"></el-button>\r\n                <el-dropdown @click=\"openUploadDialog()\" @command=\"handleUploadCommand\" size=\"small\">\r\n                    <el-button type=\"primary\" size=\"small\" icon=\"el-icon-upload\"></el-button>\r\n                    <el-dropdown-menu slot=\"dropdown\">\r\n                        <el-dropdown-item command=\"file\">{{ $t('uploadFile') }}</el-dropdown-item>\r\n                        <el-dropdown-item command=\"folder\">{{ $t('uploadFolder') }}</el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                </el-dropdown>\r\n            </el-button-group>\r\n        </div>\r\n\r\n        <el-dialog custom-class=\"uploadContainer\" :title=\"$t(this.titleTip)\" :visible.sync=\"uploadVisible\" append-to-body width=\"32%\">\r\n            <el-upload ref=\"upload\" multiple drag :action=\"uploadUrl\" :data=\"uploadData\" :before-upload=\"beforeUpload\" :on-progress=\"uploadProgress\" :on-success=\"uploadSuccess\">\r\n                <el-icon><upload /></el-icon> \r\n\r\n                <div class=\"el-upload__text\">{{ $t(this.selectTip) }}</div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">{{ this.uploadTip }}</div>\r\n            </el-upload>\r\n        </el-dialog>\r\n        \r\n        <el-table :data=\"fileList\" class=\"file-table\" @row-click=\"rowClick\" height=\"100%\">\r\n            <el-table-column\r\n                :label=\"$t('Name')\"\r\n                width=\"140\"\r\n                sortable :sort-method=\"nameSort\">\r\n                <template slot-scope=\"scope\">\r\n                    <p v-if=\"scope.row.IsDir === true\" style=\"color:#0c60b5;cursor:pointer;\" class=\"el-icon-folder\"> {{ scope.row.Name }}</p>\r\n                    <p v-else-if=\"scope.row.IsDir === false\" style=\"cursor: pointer\" class=\"el-icon-document\"> {{ scope.row.Name }}</p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column :label=\"$t('Size')\" prop=\"Size\" width=\"80\"></el-table-column>\r\n            <el-table-column :label=\"$t('ModifiedTime')\" prop=\"ModifyTime\" width=\"120\" sortable></el-table-column>\r\n        </el-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { fileList } from '@/api/file'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n    name: 'FileList',\r\n    data() {\r\n        return {\r\n            uploadVisible: false,\r\n            fileList: [],\r\n            downloadFilePath: '',\r\n            currentPath: '/',\r\n            selectTip: 'clickSelectFile',\r\n            titleTip: 'uploadFile',\r\n            uploadTip: '',\r\n            progressPercent: 0,\r\n            initialRedirectDone: false,\r\n            homePath: ''\r\n        }\r\n    },\r\n    mounted() {\r\n        // 组件挂载时，currentPath 为空或/，自动拉取\r\n        if (!this.currentPath || this.currentPath === '/') {\r\n            this.getFileList()\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['currentTab']), // currentTab may be deprecated but keeping for now\r\n        sshInfoReady() {\r\n            return this.$store.state.sshInfo && this.$store.state.sshInfo.hostname;\r\n        },\r\n        uploadUrl: () => {\r\n            return `${process.env.NODE_ENV === 'production' ? `${location.origin}` : 'api'}/file/upload`\r\n        },\r\n        uploadData: function() {\r\n            return {\r\n                sshInfo: this.$store.getters.sshReq,\r\n                path: this.currentPath\r\n            }\r\n        }\r\n    },\r\n    watch: {\r\n        // Watch for sshInfo to become available\r\n        sshInfoReady(newValue, oldValue) {\r\n            if (newValue && !oldValue) {\r\n                this.getFileList();\r\n            }\r\n        },\r\n        currentTab: function() {\r\n            // This logic might need adjustment if multi-tab is re-enabled\r\n            this.fileList = []\r\n            this.currentPath = this.currentTab && this.currentTab.path ? this.currentTab.path : '/';\r\n        }\r\n    },\r\n    methods: {\r\n        goToHome() {\r\n            if (this.homePath) {\r\n                if (this.currentPath !== this.homePath) {\r\n                    this.currentPath = this.homePath;\r\n                    this.getFileList();\r\n                }\r\n            } else {\r\n                this.$message.warning('主目录信息尚不可用，请刷新重试。');\r\n            }\r\n        },\r\n        openUploadDialog() {\r\n            this.uploadTip = `${this.$t('uploadPath')}: ${this.currentPath}`\r\n            this.uploadVisible = true\r\n        },\r\n        handleUploadCommand(cmd) {\r\n            if (cmd === 'folder') {\r\n                this.selectTip = 'clickSelectFolder'\r\n                this.titleTip = 'uploadFolder'\r\n            } else {\r\n                this.selectTip = 'clickSelectFile'\r\n                this.titleTip = 'uploadFile'\r\n            }\r\n            this.openUploadDialog();\r\n            const isFolder = 'folder' === cmd,\r\n                supported = this.webkitdirectorySupported();\r\n            if (!supported) {\r\n                isFolder && this.$message.warning('当前浏览器不支持');\r\n                return;\r\n            }\r\n            // Add folder support\r\n            this.$nextTick(() => {\r\n                const input = document.getElementsByClassName('el-upload__input')[0];\r\n                if (input) input.webkitdirectory = isFolder;\r\n            })\r\n        },\r\n        webkitdirectorySupported(){\r\n            return 'webkitdirectory' in document.createElement('input')\r\n        },\r\n        beforeUpload(file) {\r\n            this.uploadTip = `${this.$t('uploading')} ${file.name} ${this.$t('to')} ${this.currentPath}, ${this.$t('notCloseWindows')}..`\r\n            this.uploadData.id = file.uid\r\n            // Is there a folder?\r\n            const dirPath = file.webkitRelativePath;\r\n            this.uploadData.dir = dirPath ? dirPath.substring(0, dirPath.lastIndexOf('/')) : '';\r\n            return true\r\n        },\r\n        uploadSuccess(r, file) {\r\n            this.uploadTip = `${file.name}${this.$t('uploadFinish')}!`\r\n            this.getFileList();\r\n        },\r\n        uploadProgress(e, f) {\r\n            e.percent = e.percent / 2\r\n            f.percentage = f.percentage / 2\r\n            if (e.percent === 50) {\r\n                const ws = new WebSocket(`${(location.protocol === 'http:' ? 'ws' : 'wss')}://${location.host}${process.env.NODE_ENV === 'production' ? '' : '/ws'}/file/progress?id=${f.uid}`)\r\n                ws.onmessage = e1 => {\r\n                    f.percentage = (f.size + Number(e1.data)) / (f.size * 2) * 100\r\n                }\r\n                ws.onclose = () => {\r\n                    console.log(Date(), 'onclose')\r\n                }\r\n                ws.onerror = () => {\r\n                    console.log(Date(), 'onerror')\r\n                }\r\n            }\r\n        },\r\n        nameSort(a, b) {\r\n            return a.Name > b.Name\r\n        },\r\n        rowClick(row) {\r\n            if (row.IsDir) {\r\n                // Folder handling\r\n                this.currentPath = this.currentPath.charAt(this.currentPath.length - 1) === '/' ? this.currentPath + row.Name : this.currentPath + '/' + row.Name\r\n                this.getFileList()\r\n            } else {\r\n                // File handling\r\n                this.downloadFilePath = this.currentPath.charAt(this.currentPath.length - 1) === '/' ? this.currentPath + row.Name : this.currentPath + '/' + row.Name\r\n                this.downloadFile()\r\n            }\r\n        },\r\n        async getFileList() {\r\n            this.currentPath = this.currentPath.replace(/\\\\+/g, '/')\r\n            if (this.currentPath === '') {\r\n                this.currentPath = '/'\r\n            }\r\n            const result = await fileList(this.currentPath, this.$store.getters.sshReq)\r\n            if (result.Msg === 'success') {\r\n                if (result.Data.home) {\r\n                    this.homePath = result.Data.home;\r\n                }\r\n                if (result.Data.list === null) {\r\n                    this.fileList = []\r\n                } else {\r\n                    this.fileList = result.Data.list\r\n                }\r\n                // 只要后端返回的home和当前路径不同且home不为/，就切换 (仅执行一次)\r\n                if (!this.initialRedirectDone && result.Data.home && result.Data.home !== '/' && this.currentPath !== result.Data.home) {\r\n                    this.initialRedirectDone = true\r\n                    this.currentPath = result.Data.home\r\n                    await this.getFileList()\r\n                    return\r\n                }\r\n            } else {\r\n                this.fileList = []\r\n                this.$message({\r\n                    message: result.Msg,\r\n                    type: 'error',\r\n                    duration: 3000\r\n                })\r\n            }\r\n        },\r\n        upDirectory() {\r\n            if (this.currentPath === '/') {\r\n                return\r\n            }\r\n            let pathList = this.currentPath.split('/')\r\n            if (pathList[pathList.length - 1] === '') {\r\n                pathList = pathList.slice(0, pathList.length - 2)\r\n            } else {\r\n                pathList = pathList.slice(0, pathList.length - 1)\r\n            }\r\n            this.currentPath = pathList.length === 1 ? '/' : pathList.join('/')\r\n            this.getFileList()\r\n        },\r\n        downloadFile() {\r\n            const prefix = process.env.NODE_ENV === 'production' ? `${location.origin}` : 'api'\r\n            const downloadUrl = `${prefix}/file/download?path=${this.downloadFilePath}&sshInfo=${this.$store.getters.sshReq}`\r\n            window.open(downloadUrl)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.file-list-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 100%;\r\n    padding-top: 10px;\r\n    box-sizing: border-box;\r\n\r\n    .sftp-title {\r\n        font-size: 16px;\r\n        font-weight: bold;\r\n        color: var(--text-color);\r\n        text-align: center;\r\n        padding-bottom: 8px;\r\n        margin-bottom: 8px;\r\n        border-bottom: 1px solid var(--input-border);\r\n        flex-shrink: 0;\r\n    }\r\n\r\n    .file-header {\r\n        flex-shrink: 0;\r\n        margin-bottom: 10px;\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n\r\n    .path-input {\r\n        flex: 1;\r\n        padding: 0 5px;\r\n        margin-right: 2px;\r\n    }\r\n\r\n    .file-header .el-button-group .el-button {\r\n        padding: 8px;\r\n        width: 36px;\r\n        height: 32px;\r\n        line-height: 1;\r\n    }\r\n\r\n    .file-table {\r\n        flex-grow: 1;\r\n        width: 100%;\r\n        & .el-table__body-wrapper {\r\n            height: calc(100% - 40px) !important; /* Adjust based on header height */\r\n        }\r\n        /* --- Style Customization for Compact Look --- */\r\n        &.el-table th {\r\n            height: 40px;\r\n            padding: 0;\r\n        }\r\n        &.el-table td {\r\n            padding: 0;\r\n        }\r\n        .cell {\r\n            padding: 1px 0px 2px 5px;\r\n            line-height: 1.1;\r\n            p {\r\n              margin: 0;\r\n            }\r\n        }\r\n        th > .cell {\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n        /* --- End Customization --- */\r\n    }\r\n}\r\n.uploadContainer {\r\n    .el-upload {\r\n        display: flex;\r\n    }\r\n    .el-upload-dragger {\r\n        width: 95%;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}