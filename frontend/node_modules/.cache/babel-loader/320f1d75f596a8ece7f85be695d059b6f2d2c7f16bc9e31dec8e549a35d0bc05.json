{"ast":null,"code":"import \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport Terminal from '@/components/Terminal.vue';\nexport default {\n  components: {\n    Terminal\n  },\n  beforeCreate() {\n    let {\n      hostname,\n      port,\n      username,\n      password,\n      command,\n      privateKey,\n      passphrase,\n      useKey\n    } = this.$route.query;\n    // 解码\n    if (hostname) hostname = decodeURIComponent(hostname);\n    if (username) username = decodeURIComponent(username);\n    if (password) {\n      try {\n        password = atob(password);\n      } catch (e) {\n        password = decodeURIComponent(password);\n      }\n    }\n    if (command) command = decodeURIComponent(command);\n    if (privateKey) privateKey = decodeURIComponent(privateKey);\n    if (passphrase) passphrase = decodeURIComponent(passphrase);\n\n    // 如果是密钥登录，从 sessionStorage 读取完整 sshInfo\n    if (useKey) {\n      const savedInfo = sessionStorage.getItem('sshInfo');\n      if (savedInfo) {\n        const info = JSON.parse(savedInfo);\n        hostname = info.hostname;\n        port = info.port;\n        username = info.username;\n        password = info.password;\n        command = info.command;\n        privateKey = info.privateKey;\n        passphrase = info.passphrase;\n      }\n    } else if (!hostname || !username || !password && !privateKey) {\n      // fallback 到 sessionStorage\n      const savedInfo = sessionStorage.getItem('sshInfo');\n      if (savedInfo) {\n        const info = JSON.parse(savedInfo);\n        hostname = info.hostname;\n        port = info.port;\n        username = info.username;\n        password = info.password;\n        command = info.command;\n        privateKey = info.privateKey;\n        passphrase = info.passphrase;\n      }\n    }\n    if (hostname && username && (password || privateKey)) {\n      this.$store.commit('SET_SSH', {\n        hostname,\n        port: Number(port) || 22,\n        username,\n        password,\n        command,\n        privateKey,\n        passphrase\n      });\n    }\n  }\n};","map":{"version":3,"names":["Terminal","components","beforeCreate","hostname","port","username","password","command","privateKey","passphrase","useKey","$route","query","decodeURIComponent","atob","e","savedInfo","sessionStorage","getItem","info","JSON","parse","$store","commit","Number"],"sources":["C:\\Users\\Adam\\Desktop\\wssh\\webssh\\frontend\\src\\views\\TerminalPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"terminal-page\">\r\n    <Terminal />\r\n  </div>\r\n</template>\r\n<script>\r\nimport Terminal from '@/components/Terminal.vue'\r\nexport default {\r\n  components: { Terminal },\r\n  beforeCreate() {\r\n    let { hostname, port, username, password, command, privateKey, passphrase, useKey } = this.$route.query;\r\n    // 解码\r\n    if (hostname) hostname = decodeURIComponent(hostname);\r\n    if (username) username = decodeURIComponent(username);\r\n    if (password) {\r\n      try {\r\n        password = atob(password);\r\n      } catch (e) {\r\n        password = decodeURIComponent(password);\r\n      }\r\n    }\r\n    if (command) command = decodeURIComponent(command);\r\n    if (privateKey) privateKey = decodeURIComponent(privateKey);\r\n    if (passphrase) passphrase = decodeURIComponent(passphrase);\r\n\r\n    // 如果是密钥登录，从 sessionStorage 读取完整 sshInfo\r\n    if (useKey) {\r\n      const savedInfo = sessionStorage.getItem('sshInfo');\r\n      if (savedInfo) {\r\n        const info = JSON.parse(savedInfo);\r\n        hostname = info.hostname;\r\n        port = info.port;\r\n        username = info.username;\r\n        password = info.password;\r\n        command = info.command;\r\n        privateKey = info.privateKey;\r\n        passphrase = info.passphrase;\r\n      }\r\n    } else if (!hostname || !username || (!password && !privateKey)) {\r\n      // fallback 到 sessionStorage\r\n      const savedInfo = sessionStorage.getItem('sshInfo');\r\n      if (savedInfo) {\r\n        const info = JSON.parse(savedInfo);\r\n        hostname = info.hostname;\r\n        port = info.port;\r\n        username = info.username;\r\n        password = info.password;\r\n        command = info.command;\r\n        privateKey = info.privateKey;\r\n        passphrase = info.passphrase;\r\n      }\r\n    }\r\n\r\n    if (hostname && username && (password || privateKey)) {\r\n      this.$store.commit('SET_SSH', {\r\n        hostname,\r\n        port: Number(port) || 22,\r\n        username,\r\n        password,\r\n        command,\r\n        privateKey,\r\n        passphrase\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n <style scoped>\r\n/* 1. 确保页面容器占满全屏 */\r\n.terminal-page {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: #000; /* 强制背景为黑色，防止白屏刺眼 */\r\n  overflow: hidden; /* 防止出现双滚动条 */\r\n  display: flex;    /* 使用 Flex 布局 */\r\n  flex-direction: column;\r\n}\r\n\r\n/* 2. 强制让内部的 Terminal 组件占满剩余空间 */\r\n/* 注意：这里使用了深度选择器 :deep() 来影响子组件 */\r\n.terminal-page :deep(.terminal-container),\r\n.terminal-page :deep(#terminal) {\r\n  width: 100%;\r\n  height: 100%;\r\n  flex: 1;\r\n}\r\n</style>\r\n"],"mappings":";;AAMA,OAAOA,QAAO,MAAO,2BAA0B;AAC/C,eAAe;EACbC,UAAU,EAAE;IAAED;EAAS,CAAC;EACxBE,YAAYA,CAAA,EAAG;IACb,IAAI;MAAEC,QAAQ;MAAEC,IAAI;MAAEC,QAAQ;MAAEC,QAAQ;MAAEC,OAAO;MAAEC,UAAU;MAAEC,UAAU;MAAEC;IAAO,IAAI,IAAI,CAACC,MAAM,CAACC,KAAK;IACvG;IACA,IAAIT,QAAQ,EAAEA,QAAO,GAAIU,kBAAkB,CAACV,QAAQ,CAAC;IACrD,IAAIE,QAAQ,EAAEA,QAAO,GAAIQ,kBAAkB,CAACR,QAAQ,CAAC;IACrD,IAAIC,QAAQ,EAAE;MACZ,IAAI;QACFA,QAAO,GAAIQ,IAAI,CAACR,QAAQ,CAAC;MAC3B,EAAE,OAAOS,CAAC,EAAE;QACVT,QAAO,GAAIO,kBAAkB,CAACP,QAAQ,CAAC;MACzC;IACF;IACA,IAAIC,OAAO,EAAEA,OAAM,GAAIM,kBAAkB,CAACN,OAAO,CAAC;IAClD,IAAIC,UAAU,EAAEA,UAAS,GAAIK,kBAAkB,CAACL,UAAU,CAAC;IAC3D,IAAIC,UAAU,EAAEA,UAAS,GAAII,kBAAkB,CAACJ,UAAU,CAAC;;IAE3D;IACA,IAAIC,MAAM,EAAE;MACV,MAAMM,SAAQ,GAAIC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;MACnD,IAAIF,SAAS,EAAE;QACb,MAAMG,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;QAClCb,QAAO,GAAIgB,IAAI,CAAChB,QAAQ;QACxBC,IAAG,GAAIe,IAAI,CAACf,IAAI;QAChBC,QAAO,GAAIc,IAAI,CAACd,QAAQ;QACxBC,QAAO,GAAIa,IAAI,CAACb,QAAQ;QACxBC,OAAM,GAAIY,IAAI,CAACZ,OAAO;QACtBC,UAAS,GAAIW,IAAI,CAACX,UAAU;QAC5BC,UAAS,GAAIU,IAAI,CAACV,UAAU;MAC9B;IACF,OAAO,IAAI,CAACN,QAAO,IAAK,CAACE,QAAO,IAAM,CAACC,QAAO,IAAK,CAACE,UAAW,EAAE;MAC/D;MACA,MAAMQ,SAAQ,GAAIC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;MACnD,IAAIF,SAAS,EAAE;QACb,MAAMG,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;QAClCb,QAAO,GAAIgB,IAAI,CAAChB,QAAQ;QACxBC,IAAG,GAAIe,IAAI,CAACf,IAAI;QAChBC,QAAO,GAAIc,IAAI,CAACd,QAAQ;QACxBC,QAAO,GAAIa,IAAI,CAACb,QAAQ;QACxBC,OAAM,GAAIY,IAAI,CAACZ,OAAO;QACtBC,UAAS,GAAIW,IAAI,CAACX,UAAU;QAC5BC,UAAS,GAAIU,IAAI,CAACV,UAAU;MAC9B;IACF;IAEA,IAAIN,QAAO,IAAKE,QAAO,KAAMC,QAAO,IAAKE,UAAU,CAAC,EAAE;MACpD,IAAI,CAACc,MAAM,CAACC,MAAM,CAAC,SAAS,EAAE;QAC5BpB,QAAQ;QACRC,IAAI,EAAEoB,MAAM,CAACpB,IAAI,KAAK,EAAE;QACxBC,QAAQ;QACRC,QAAQ;QACRC,OAAO;QACPC,UAAU;QACVC;MACF,CAAC,CAAC;IACJ;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}