{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n// 1. 修正 Import 大写问题\nimport axios from 'axios';\nimport { ElMessage } from 'element-plus';\n\n// 2. 引入图标，建议给 Link 起个别名防止冲突\nimport { Setting, Sunny, Moon, FolderOpened, Refresh, Link as LinkIcon,\n// 关键：重命名为 LinkIcon\nUpload, DocumentCopy, Delete } from '@element-plus/icons-vue';\nexport default {\n  // 3. 注册组件\n  components: {\n    Setting,\n    Sunny,\n    Moon,\n    FolderOpened,\n    Refresh,\n    LinkIcon,\n    // 使用别名注册\n    Upload,\n    DocumentCopy,\n    Delete\n  },\n  // ... 你的 data() 和 methods 等其他代码 ...\n\n  data() {\n    return {\n      sshInfo: {\n        hostname: '',\n        port: '',\n        username: '',\n        password: '',\n        privateKey: '',\n        passphrase: '',\n        command: ''\n      },\n      privateKeyFileName: '',\n      generatedLink: '',\n      isDarkTheme: false,\n      // GitHub 相关数据\n      showGithubDialog: false,\n      showCloudListDialog: false,\n      cloudList: [],\n      githubLoading: false,\n      githubConfig: {\n        token: '',\n        owner: '',\n        repo: '',\n        path: 'ssh_links.json'\n      }\n    };\n  },\n  watch: {\n    sshInfo: {\n      handler(newVal) {\n        localStorage.setItem('sshInfo', JSON.stringify(newVal));\n      },\n      deep: true\n    }\n  },\n  created() {\n    const ghConfig = localStorage.getItem('gh_config');\n    if (ghConfig) {\n      this.githubConfig = JSON.parse(ghConfig);\n    }\n    const savedInfo = localStorage.getItem('connectionInfo');\n    if (savedInfo) {\n      const info = JSON.parse(savedInfo);\n      this.sshInfo = {\n        hostname: info.hostname || '',\n        port: info.port || '',\n        username: info.username || '',\n        password: info.password || '',\n        privateKey: info.privateKey || '',\n        passphrase: info.passphrase || '',\n        command: info.command || ''\n      };\n      if (info.privateKey) {\n        this.privateKeyFileName = '已保存的密钥文件';\n      }\n    }\n    const savedTheme = localStorage.getItem('isDarkTheme');\n    if (savedTheme !== null) {\n      this.isDarkTheme = savedTheme === 'true';\n    }\n\n    // 动态加载 FontAwesome (用于终端图标)\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';\n    document.head.appendChild(link);\n  },\n  methods: {\n    saveGithubSettings() {\n      localStorage.setItem('gh_config', JSON.stringify(this.githubConfig));\n      this.showGithubDialog = false;\n      ElMessage.success('GitHub 配置已保存');\n    },\n    async syncToGitHub() {\n      const {\n        token,\n        owner,\n        repo,\n        path\n      } = this.githubConfig;\n      if (!token) {\n        ElMessage.warning('请先配置 GitHub 信息');\n        this.showGithubDialog = true;\n        return;\n      }\n      if (!this.generatedLink) {\n        this.onGenerateLink();\n        if (!this.generatedLink) return;\n      }\n      this.githubLoading = true;\n      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\n      const headers = {\n        'Authorization': `token ${token}`\n      };\n      const uniqueKey = `${this.sshInfo.hostname}_${this.sshInfo.username}`;\n      const dataToSave = {\n        url: this.generatedLink,\n        hostname: this.sshInfo.hostname,\n        username: this.sshInfo.username,\n        updated_at: new Date().toLocaleString()\n      };\n      try {\n        let existingContent = {};\n        let sha = null;\n        try {\n          const res = await axios.get(apiUrl, {\n            headers\n          });\n          sha = res.data.sha;\n          const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\n          existingContent = JSON.parse(decodedContent);\n        } catch (error) {\n          if (!error.response || error.response.status !== 404) throw error;\n        }\n        existingContent[uniqueKey] = dataToSave;\n        const contentBase64 = window.btoa(unescape(encodeURIComponent(JSON.stringify(existingContent, null, 2))));\n        const payload = {\n          message: `Add SSH Link: ${uniqueKey}`,\n          content: contentBase64\n        };\n        if (sha) payload.sha = sha;\n        await axios.put(apiUrl, payload, {\n          headers\n        });\n        ElMessage.success('链接已保存到 GitHub！');\n      } catch (e) {\n        console.error(e);\n        ElMessage.error('保存失败，请检查配置或网络');\n      } finally {\n        this.githubLoading = false;\n      }\n    },\n    async fetchCloudList() {\n      const {\n        token,\n        owner,\n        repo,\n        path\n      } = this.githubConfig;\n      if (!token) {\n        ElMessage.warning('请先配置 GitHub');\n        this.showGithubDialog = true;\n        return;\n      }\n      this.showCloudListDialog = true;\n      this.githubLoading = true;\n      this.cloudList = [];\n      try {\n        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\n        const res = await axios.get(apiUrl, {\n          headers: {\n            'Authorization': `token ${token}`\n          }\n        });\n        const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\n        const jsonContent = JSON.parse(decodedContent);\n        this.cloudList = Object.entries(jsonContent).map(([key, value]) => ({\n          key: key,\n          ...value\n        }));\n      } catch (e) {\n        if (e.response && e.response.status === 404) {\n          this.cloudList = [];\n        } else {\n          ElMessage.error('获取列表失败');\n        }\n      } finally {\n        this.githubLoading = false;\n      }\n    },\n    openSavedUrl(url) {\n      if (url) window.open(url, '_blank');\n    },\n    copySavedUrl(url) {\n      navigator.clipboard.writeText(url).then(() => {\n        ElMessage.success('已复制');\n      });\n    },\n    async deleteFromCloud(key) {\n      const {\n        token,\n        owner,\n        repo,\n        path\n      } = this.githubConfig;\n      this.githubLoading = true;\n      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\n      const headers = {\n        'Authorization': `token ${token}`\n      };\n      try {\n        const res = await axios.get(apiUrl, {\n          headers\n        });\n        const sha = res.data.sha;\n        const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\n        const existingContent = JSON.parse(decodedContent);\n        delete existingContent[key];\n        const contentBase64 = window.btoa(unescape(encodeURIComponent(JSON.stringify(existingContent, null, 2))));\n        await axios.put(apiUrl, {\n          message: `Delete ${key}`,\n          content: contentBase64,\n          sha: sha\n        }, {\n          headers\n        });\n        ElMessage.success('删除成功');\n        this.cloudList = this.cloudList.filter(item => item.key !== key);\n      } catch (e) {\n        ElMessage.error('删除失败');\n      } finally {\n        this.githubLoading = false;\n      }\n    },\n    onConnect() {\n      sessionStorage.removeItem('sshInfo');\n      if (!this.sshInfo.hostname) {\n        ElMessage.error('请输入主机地址！');\n        return;\n      }\n      if (!this.sshInfo.username) {\n        ElMessage.error('请输入用户名！');\n        return;\n      }\n      if (!this.sshInfo.password && !this.sshInfo.privateKey) {\n        ElMessage.error('请输入密码或上传密钥！');\n        return;\n      }\n      if (this.sshInfo.privateKey && this.sshInfo.privateKey.trim()) {\n        this.sshInfo.password = '';\n      } else if (this.sshInfo.password) {\n        this.sshInfo.privateKey = '';\n        this.sshInfo.passphrase = '';\n        this.privateKeyFileName = '';\n      }\n      const connectionInfo = {\n        hostname: this.sshInfo.hostname,\n        port: this.sshInfo.port || 22,\n        username: this.sshInfo.username,\n        password: this.sshInfo.password || '',\n        privateKey: this.sshInfo.privateKey || '',\n        passphrase: this.sshInfo.passphrase || '',\n        command: this.sshInfo.command || ''\n      };\n      localStorage.setItem('connectionInfo', JSON.stringify(connectionInfo));\n      const query = {\n        hostname: encodeURIComponent(this.sshInfo.hostname),\n        port: Number(this.sshInfo.port) || 22,\n        username: encodeURIComponent(this.sshInfo.username),\n        command: encodeURIComponent(this.sshInfo.command || '')\n      };\n      if (this.sshInfo.privateKey && this.sshInfo.privateKey.trim()) {\n        sessionStorage.setItem('sshInfo', JSON.stringify(this.sshInfo));\n        query.useKey = 1;\n      } else if (this.sshInfo.password) {\n        query.password = btoa(this.sshInfo.password);\n      }\n      const url = this.$router.resolve({\n        path: '/terminal',\n        query\n      }).href;\n      window.open(url, '_blank');\n    },\n    onReset() {\n      this.sshInfo = {\n        hostname: '',\n        port: '',\n        username: '',\n        password: '',\n        command: '',\n        privateKey: '',\n        passphrase: ''\n      };\n      this.privateKeyFileName = '';\n      this.generatedLink = '';\n      localStorage.removeItem('connectionInfo');\n      sessionStorage.removeItem('sshInfo');\n      // Vue 3 中通常不建议直接操作 DOM，但为了重置 input file 暂时保留\n      const fileInput = document.querySelector('.upload-key input[type=\"file\"]');\n      if (fileInput) {\n        fileInput.value = '';\n      }\n    },\n    onGenerateLink() {\n      if (this.sshInfo.privateKey) {\n        ElMessage.warning('密钥方式登录不支持生成快捷链接，请改用密码登录方式');\n        return;\n      }\n      if (!this.sshInfo.hostname) {\n        ElMessage.error('请输入主机地址！');\n        return;\n      }\n      if (!this.sshInfo.username) {\n        ElMessage.error('请输入用户名！');\n        return;\n      }\n      if (!this.sshInfo.password && !this.sshInfo.privateKey) {\n        ElMessage.error('请输入密码或上传密钥以生成链接！');\n        return;\n      }\n      const url = new URL(window.location.href);\n      url.pathname = '/terminal';\n      const cleanSshInfo = {};\n      const infoToProcess = {\n        ...this.sshInfo,\n        port: this.sshInfo.port || 22\n      };\n      for (const key in infoToProcess) {\n        if (infoToProcess[key] !== '' && infoToProcess[key] !== null) {\n          if (key === 'password') {\n            cleanSshInfo[key] = btoa(infoToProcess[key]);\n          } else {\n            cleanSshInfo[key] = infoToProcess[key];\n          }\n        }\n      }\n      url.search = new URLSearchParams(cleanSshInfo).toString();\n      this.generatedLink = url.href;\n    },\n    copyLink() {\n      if (this.generatedLink) {\n        navigator.clipboard.writeText(this.generatedLink).then(() => {\n          ElMessage.success('链接已复制！');\n        }).catch(err => {\n          ElMessage.error('复制失败: ' + err);\n        });\n      }\n    },\n    toggleTheme() {\n      this.isDarkTheme = !this.isDarkTheme;\n      localStorage.setItem('isDarkTheme', this.isDarkTheme);\n      // 调用 main.js 中定义的全局 window.setTheme (如果有的话)，或手动触发\n      if (window.setTheme) {\n        window.setTheme(this.isDarkTheme ? 'dark' : 'light');\n      }\n    },\n    handlePrivateKeyUpload(file) {\n      this.sshInfo.password = '';\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.sshInfo.privateKey = e.target.result;\n        this.privateKeyFileName = file.name;\n      };\n      reader.readAsText(file);\n      return false;\n    }\n  }\n};","map":{"version":3,"names":["axios","ElMessage","Setting","Sunny","Moon","FolderOpened","Refresh","Link","LinkIcon","Upload","DocumentCopy","Delete","components","data","sshInfo","hostname","port","username","password","privateKey","passphrase","command","privateKeyFileName","generatedLink","isDarkTheme","showGithubDialog","showCloudListDialog","cloudList","githubLoading","githubConfig","token","owner","repo","path","watch","handler","newVal","localStorage","setItem","JSON","stringify","deep","created","ghConfig","getItem","parse","savedInfo","info","savedTheme","link","document","createElement","rel","href","head","appendChild","methods","saveGithubSettings","success","syncToGitHub","warning","onGenerateLink","apiUrl","headers","uniqueKey","dataToSave","url","updated_at","Date","toLocaleString","existingContent","sha","res","get","decodedContent","decodeURIComponent","escape","window","atob","content","error","response","status","contentBase64","btoa","unescape","encodeURIComponent","payload","message","put","e","console","fetchCloudList","jsonContent","Object","entries","map","key","value","openSavedUrl","open","copySavedUrl","navigator","clipboard","writeText","then","deleteFromCloud","filter","item","onConnect","sessionStorage","removeItem","trim","connectionInfo","query","Number","useKey","$router","resolve","onReset","fileInput","querySelector","URL","location","pathname","cleanSshInfo","infoToProcess","search","URLSearchParams","toString","copyLink","catch","err","toggleTheme","setTheme","handlePrivateKeyUpload","file","reader","FileReader","onload","target","result","name","readAsText"],"sources":["C:\\Users\\Adam\\Desktop\\wssh\\webssh\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\" :class=\"{ 'dark-theme': isDarkTheme }\">\r\n    \r\n    <div class=\"top-right-wrapper\">\r\n      <div class=\"icon-btn setting-btn\" @click=\"showGithubDialog = true\" title=\"GitHub 云同步配置\">\r\n        <el-icon :size=\"20\"><Setting /></el-icon> \r\n      </div>\r\n      <div class=\"theme-switch\" @click=\"toggleTheme\" title=\"切换主题\">\r\n        <el-icon :size=\"20\">\r\n          <component :is=\"isDarkTheme ? 'Sunny' : 'Moon'\" />\r\n        </el-icon>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"card\" style=\"margin: 20px auto;\">\r\n      <el-form :model=\"sshInfo\" label-position=\"top\" class=\"form-grid\">\r\n         <el-row :gutter=\"20\">\r\n           <el-col :span=\"12\">\r\n             <el-form-item label=\"地址 (Hostname)\">\r\n               <el-input ref=\"hostnameInput\" v-model=\"sshInfo.hostname\" placeholder=\"IP or Hostname\" />\r\n             </el-form-item>\r\n           </el-col>\r\n           <el-col :span=\"12\">\r\n             <el-form-item label=\"端口 (Port)\">\r\n               <el-input v-model.number=\"sshInfo.port\" placeholder=\"22\" />\r\n             </el-form-item>\r\n           </el-col>\r\n         </el-row>\r\n         <el-row :gutter=\"20\">\r\n           <el-col :span=\"12\">\r\n             <el-form-item label=\"用户名 (Username)\">\r\n               <el-input ref=\"usernameInput\" v-model=\"sshInfo.username\" placeholder=\"username\" />\r\n             </el-form-item>\r\n           </el-col>\r\n           <el-col :span=\"12\">\r\n             <el-form-item label=\"密码 (Password)\">\r\n               <el-input ref=\"passwordInput\" v-model=\"sshInfo.password\" type=\"password\" placeholder=\"password\" show-password/>\r\n             </el-form-item>\r\n           </el-col>\r\n         </el-row>\r\n         <el-row :gutter=\"20\">\r\n           <el-col :xs=\"24\" :sm=\"12\">\r\n             <el-form-item label=\"私钥 (Private Key)\">\r\n               <el-upload\r\n                 class=\"upload-key\"\r\n                 :show-file-list=\"false\"\r\n                 :before-upload=\"handlePrivateKeyUpload\"\r\n                 accept=\".pem,.ppk,.key,.rsa,.id_rsa,.id_dsa,.txt\"\r\n               >\r\n                 <div class=\"upload-flex-row\">\r\n                   <div class=\"upload-btn\">\r\n                     <el-icon style=\"margin-right: 8px;\"><FolderOpened /></el-icon>\r\n                     上传密钥\r\n                   </div>\r\n                   <div class=\"upload-filename\" style=\"width: 12rem\">\r\n                     {{ privateKeyFileName || '未上传密钥文件' }}\r\n                   </div>\r\n                 </div>\r\n               </el-upload>\r\n             </el-form-item>\r\n           </el-col>\r\n           <el-col :xs=\"24\" :sm=\"12\">\r\n             <el-form-item label=\"密钥口令 (PIN)\">\r\n               <el-input v-model=\"sshInfo.passphrase\" placeholder=\"如果有设置请输入密钥口令\" />\r\n             </el-form-item>\r\n           </el-col>\r\n         </el-row>\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"初始命令 (Initial command)\">\r\n              <el-input v-model=\"sshInfo.command\" placeholder=\"Command after login\" />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        \r\n        <el-row type=\"flex\" justify=\"center\" style=\"margin-top: 10px; flex-wrap: wrap; gap: 10px;\">\r\n          <el-button type=\"danger\" @click=\"onReset\">\r\n            <el-icon style=\"margin-right: 5px\"><Refresh /></el-icon> 重置\r\n          </el-button>\r\n          \r\n          <el-button type=\"primary\" @click=\"onGenerateLink\">\r\n            <el-icon style=\"margin-right: 5px\"><LinkIcon /></el-icon> 生成链接\r\n          </el-button>\r\n          \r\n          <el-button type=\"warning\" :loading=\"githubLoading\" @click=\"syncToGitHub\">\r\n            <el-icon style=\"margin-right: 5px\"><Upload /></el-icon> 保存链接\r\n          </el-button>\r\n\r\n          <el-button type=\"info\" @click=\"fetchCloudList\">\r\n            <el-icon style=\"margin-right: 5px\"><FolderOpened /></el-icon> 云端列表\r\n          </el-button>\r\n          \r\n          <el-button type=\"success\" @click=\"onConnect\">\r\n            <i class=\"fas fa-terminal\" style=\"margin-right: 6px;\"></i> 连接SSH\r\n          </el-button>\r\n        </el-row>\r\n\r\n        <el-row v-if=\"generatedLink\" style=\"margin-top: 18px;\">\r\n          <el-col :span=\"24\">\r\n            <el-input v-model=\"generatedLink\" readonly class=\"gen-link-input\">\r\n              <template #append>\r\n                <el-button style=\"color: #1adb6d;\" @click=\"copyLink\">\r\n                   <el-icon><DocumentCopy /></el-icon>\r\n                </el-button>\r\n              </template>\r\n            </el-input>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n      <a href=\"https://github.com/adamj001/webssh-lw\" target=\"_blank\" rel=\"noopener noreferrer\">wssh</a>\r\n    </div>\r\n\r\n    <el-dialog \r\n      title=\"GitHub 云同步配置\" \r\n      v-model=\"showGithubDialog\" \r\n      width=\"90%\" \r\n      :class=\"isDarkTheme ? 'dark-dialog' : ''\" \r\n      append-to-body\r\n    >\r\n      <el-form :model=\"githubConfig\" label-width=\"100px\" size=\"small\">\r\n        <el-form-item label=\"Token\">\r\n          <el-input v-model=\"githubConfig.token\" type=\"password\" show-password placeholder=\"ghp_xxxxxxxx...\"></el-input>\r\n          <div style=\"font-size:12px; opacity: 0.7;\">需勾选 repo 权限</div>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"githubConfig.owner\" placeholder=\"GitHub Username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"仓库名\">\r\n          <el-input v-model=\"githubConfig.repo\" placeholder=\"Repository Name (私库)\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"文件路径\">\r\n          <el-input v-model=\"githubConfig.path\" placeholder=\"例如: ssh_links.json\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showGithubDialog = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"saveGithubSettings\">保存配置</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <el-dialog \r\n      title=\"☁️ 云端保存的链接\" \r\n      v-model=\"showCloudListDialog\" \r\n      width=\"95%\" \r\n      :class=\"isDarkTheme ? 'dark-dialog' : ''\" \r\n      append-to-body\r\n    >\r\n      <el-table :data=\"cloudList\" style=\"width: 100%\" v-loading=\"githubLoading\" empty-text=\"暂无数据或加载失败\">\r\n        <el-table-column prop=\"hostname\" label=\"主机\" min-width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"用户\" min-width=\"80\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"160\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" type=\"primary\" plain @click=\"openSavedUrl(scope.row.url)\">打开</el-button>\r\n            <el-button size=\"small\" circle @click=\"copySavedUrl(scope.row.url)\">\r\n                <el-icon><DocumentCopy /></el-icon>\r\n            </el-button>\r\n            <el-button size=\"small\" type=\"danger\" circle @click=\"deleteFromCloud(scope.row.key)\">\r\n                <el-icon><Delete /></el-icon>\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 1. 修正 Import 大写问题\r\nimport axios from 'axios' \r\nimport { ElMessage } from 'element-plus'\r\n\r\n// 2. 引入图标，建议给 Link 起个别名防止冲突\r\nimport { \r\n  Setting, \r\n  Sunny, \r\n  Moon, \r\n  FolderOpened, \r\n  Refresh, \r\n  Link as LinkIcon, // 关键：重命名为 LinkIcon\r\n  Upload, \r\n  DocumentCopy, \r\n  Delete \r\n} from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  // 3. 注册组件\r\n  components: {\r\n    Setting, \r\n    Sunny, \r\n    Moon, \r\n    FolderOpened, \r\n    Refresh, \r\n    LinkIcon, // 使用别名注册\r\n    Upload, \r\n    DocumentCopy, \r\n    Delete\r\n  },\r\n  \r\n  // ... 你的 data() 和 methods 等其他代码 ...\r\n\r\n  data () {\r\n    return {\r\n      sshInfo: {\r\n        hostname: '',\r\n        port: '',\r\n        username: '',\r\n        password: '',\r\n        privateKey: '',\r\n        passphrase: '',\r\n        command: ''\r\n      },\r\n      privateKeyFileName: '',\r\n      generatedLink: '',\r\n      isDarkTheme: false,\r\n      \r\n      // GitHub 相关数据\r\n      showGithubDialog: false,\r\n      showCloudListDialog: false,\r\n      cloudList: [],\r\n      githubLoading: false,\r\n      githubConfig: {\r\n        token: '',\r\n        owner: '',\r\n        repo: '',\r\n        path: 'ssh_links.json'\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    sshInfo: {\r\n      handler(newVal) {\r\n        localStorage.setItem('sshInfo', JSON.stringify(newVal));\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    const ghConfig = localStorage.getItem('gh_config');\r\n    if (ghConfig) {\r\n      this.githubConfig = JSON.parse(ghConfig);\r\n    }\r\n\r\n    const savedInfo = localStorage.getItem('connectionInfo')\r\n    if (savedInfo) {\r\n      const info = JSON.parse(savedInfo)\r\n      this.sshInfo = {\r\n        hostname: info.hostname || '',\r\n        port: info.port || '',\r\n        username: info.username || '',\r\n        password: info.password || '',\r\n        privateKey: info.privateKey || '',\r\n        passphrase: info.passphrase || '',\r\n        command: info.command || ''\r\n      }\r\n      if (info.privateKey) {\r\n        this.privateKeyFileName = '已保存的密钥文件'\r\n      }\r\n    }\r\n    \r\n    const savedTheme = localStorage.getItem('isDarkTheme')\r\n    if (savedTheme !== null) {\r\n      this.isDarkTheme = savedTheme === 'true'\r\n    }\r\n    \r\n    // 动态加载 FontAwesome (用于终端图标)\r\n    const link = document.createElement('link')\r\n    link.rel = 'stylesheet'\r\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css'\r\n    document.head.appendChild(link)\r\n  },\r\n  methods: {\r\n    saveGithubSettings() {\r\n      localStorage.setItem('gh_config', JSON.stringify(this.githubConfig));\r\n      this.showGithubDialog = false;\r\n      ElMessage.success('GitHub 配置已保存');\r\n    },\r\n\r\n    async syncToGitHub() {\r\n      const { token, owner, repo, path } = this.githubConfig;\r\n      if (!token) {\r\n        ElMessage.warning('请先配置 GitHub 信息');\r\n        this.showGithubDialog = true;\r\n        return;\r\n      }\r\n      \r\n      if (!this.generatedLink) {\r\n         this.onGenerateLink();\r\n         if (!this.generatedLink) return; \r\n      }\r\n\r\n      this.githubLoading = true;\r\n      const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\r\n      const headers = { 'Authorization': `token ${token}` };\r\n      const uniqueKey = `${this.sshInfo.hostname}_${this.sshInfo.username}`;\r\n      \r\n      const dataToSave = {\r\n        url: this.generatedLink,\r\n        hostname: this.sshInfo.hostname,\r\n        username: this.sshInfo.username,\r\n        updated_at: new Date().toLocaleString()\r\n      };\r\n\r\n      try {\r\n        let existingContent = {};\r\n        let sha = null;\r\n\r\n        try {\r\n          const res = await axios.get(apiUrl, { headers });\r\n          sha = res.data.sha;\r\n          const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\r\n          existingContent = JSON.parse(decodedContent);\r\n        } catch (error) {\r\n           if (!error.response || error.response.status !== 404) throw error;\r\n        }\r\n\r\n        existingContent[uniqueKey] = dataToSave;\r\n\r\n        const contentBase64 = window.btoa(unescape(encodeURIComponent(JSON.stringify(existingContent, null, 2))));\r\n        const payload = {\r\n          message: `Add SSH Link: ${uniqueKey}`,\r\n          content: contentBase64\r\n        };\r\n        if (sha) payload.sha = sha;\r\n\r\n        await axios.put(apiUrl, payload, { headers });\r\n        ElMessage.success('链接已保存到 GitHub！');\r\n      } catch (e) {\r\n        console.error(e);\r\n        ElMessage.error('保存失败，请检查配置或网络');\r\n      } finally {\r\n        this.githubLoading = false;\r\n      }\r\n    },\r\n\r\n    async fetchCloudList() {\r\n      const { token, owner, repo, path } = this.githubConfig;\r\n      if (!token) {\r\n        ElMessage.warning('请先配置 GitHub');\r\n        this.showGithubDialog = true;\r\n        return;\r\n      }\r\n      \r\n      this.showCloudListDialog = true;\r\n      this.githubLoading = true;\r\n      this.cloudList = [];\r\n\r\n      try {\r\n        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\r\n        const res = await axios.get(apiUrl, { headers: { 'Authorization': `token ${token}` } });\r\n        \r\n        const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\r\n        const jsonContent = JSON.parse(decodedContent);\r\n        \r\n        this.cloudList = Object.entries(jsonContent).map(([key, value]) => ({\r\n          key: key,\r\n          ...value\r\n        }));\r\n      } catch (e) {\r\n        if (e.response && e.response.status === 404) {\r\n           this.cloudList = []; \r\n        } else {\r\n           ElMessage.error('获取列表失败');\r\n        }\r\n      } finally {\r\n        this.githubLoading = false;\r\n      }\r\n    },\r\n\r\n    openSavedUrl(url) {\r\n        if(url) window.open(url, '_blank');\r\n    },\r\n\r\n    copySavedUrl(url) {\r\n        navigator.clipboard.writeText(url).then(() => {\r\n          ElMessage.success('已复制');\r\n        });\r\n    },\r\n\r\n    async deleteFromCloud(key) {\r\n        const { token, owner, repo, path } = this.githubConfig;\r\n        this.githubLoading = true;\r\n        const apiUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\r\n        const headers = { 'Authorization': `token ${token}` };\r\n\r\n        try {\r\n            const res = await axios.get(apiUrl, { headers });\r\n            const sha = res.data.sha;\r\n            const decodedContent = decodeURIComponent(escape(window.atob(res.data.content)));\r\n            const existingContent = JSON.parse(decodedContent);\r\n\r\n            delete existingContent[key];\r\n\r\n            const contentBase64 = window.btoa(unescape(encodeURIComponent(JSON.stringify(existingContent, null, 2))));\r\n            await axios.put(apiUrl, {\r\n                message: `Delete ${key}`,\r\n                content: contentBase64,\r\n                sha: sha\r\n            }, { headers });\r\n\r\n            ElMessage.success('删除成功');\r\n            this.cloudList = this.cloudList.filter(item => item.key !== key);\r\n\r\n        } catch (e) {\r\n            ElMessage.error('删除失败');\r\n        } finally {\r\n            this.githubLoading = false;\r\n        }\r\n    },\r\n\r\n    onConnect () {\r\n      sessionStorage.removeItem('sshInfo')\r\n      if (!this.sshInfo.hostname) {\r\n        ElMessage.error('请输入主机地址！')\r\n        return\r\n      }\r\n      if (!this.sshInfo.username) {\r\n        ElMessage.error('请输入用户名！')\r\n        return\r\n      }\r\n      if (!this.sshInfo.password && !this.sshInfo.privateKey) {\r\n        ElMessage.error('请输入密码或上传密钥！')\r\n        return\r\n      }\r\n\r\n      if (this.sshInfo.privateKey && this.sshInfo.privateKey.trim()) {\r\n        this.sshInfo.password = ''\r\n      } else if (this.sshInfo.password) {\r\n        this.sshInfo.privateKey = ''\r\n        this.sshInfo.passphrase = ''\r\n        this.privateKeyFileName = ''\r\n      }\r\n\r\n      const connectionInfo = {\r\n        hostname: this.sshInfo.hostname,\r\n        port: this.sshInfo.port || 22,\r\n        username: this.sshInfo.username,\r\n        password: this.sshInfo.password || '',\r\n        privateKey: this.sshInfo.privateKey || '',\r\n        passphrase: this.sshInfo.passphrase || '',\r\n        command: this.sshInfo.command || ''\r\n      }\r\n      localStorage.setItem('connectionInfo', JSON.stringify(connectionInfo))\r\n\r\n      const query = {\r\n        hostname: encodeURIComponent(this.sshInfo.hostname),\r\n        port: Number(this.sshInfo.port) || 22,\r\n        username: encodeURIComponent(this.sshInfo.username),\r\n        command: encodeURIComponent(this.sshInfo.command || '')\r\n      }\r\n\r\n      if (this.sshInfo.privateKey && this.sshInfo.privateKey.trim()) {\r\n        sessionStorage.setItem('sshInfo', JSON.stringify(this.sshInfo))\r\n        query.useKey = 1\r\n      } else if (this.sshInfo.password) {\r\n        query.password = btoa(this.sshInfo.password)\r\n      }\r\n\r\n      const url = this.$router.resolve({ path: '/terminal', query }).href\r\n      window.open(url, '_blank')\r\n    },\r\n    onReset () {\r\n      this.sshInfo = { \r\n        hostname: '', \r\n        port: '', \r\n        username: '', \r\n        password: '', \r\n        command: '', \r\n        privateKey: '', \r\n        passphrase: '' \r\n      }\r\n      this.privateKeyFileName = ''\r\n      this.generatedLink = ''\r\n      localStorage.removeItem('connectionInfo')\r\n      sessionStorage.removeItem('sshInfo')\r\n      // Vue 3 中通常不建议直接操作 DOM，但为了重置 input file 暂时保留\r\n      const fileInput = document.querySelector('.upload-key input[type=\"file\"]')\r\n      if (fileInput) {\r\n        fileInput.value = ''\r\n      }\r\n    },\r\n    onGenerateLink () {\r\n      if (this.sshInfo.privateKey) {\r\n        ElMessage.warning('密钥方式登录不支持生成快捷链接，请改用密码登录方式')\r\n        return\r\n      }\r\n      if (!this.sshInfo.hostname) {\r\n        ElMessage.error('请输入主机地址！')\r\n        return\r\n      }\r\n      if (!this.sshInfo.username) {\r\n        ElMessage.error('请输入用户名！')\r\n        return\r\n      }\r\n      if (!this.sshInfo.password && !this.sshInfo.privateKey) {\r\n        ElMessage.error('请输入密码或上传密钥以生成链接！')\r\n        return\r\n      }\r\n      const url = new URL(window.location.href)\r\n      url.pathname = '/terminal'\r\n      const cleanSshInfo = {}\r\n      const infoToProcess = { ...this.sshInfo, port: this.sshInfo.port || 22 }\r\n      for (const key in infoToProcess) {\r\n        if (infoToProcess[key] !== '' && infoToProcess[key] !== null) {\r\n          if (key === 'password') {\r\n            cleanSshInfo[key] = btoa(infoToProcess[key])\r\n          } else {\r\n            cleanSshInfo[key] = infoToProcess[key]\r\n          }\r\n        }\r\n      }\r\n      url.search = new URLSearchParams(cleanSshInfo).toString()\r\n      this.generatedLink = url.href\r\n    },\r\n    copyLink () {\r\n      if (this.generatedLink) {\r\n        navigator.clipboard.writeText(this.generatedLink).then(() => {\r\n          ElMessage.success('链接已复制！')\r\n        }).catch(err => {\r\n          ElMessage.error('复制失败: ' + err)\r\n        })\r\n      }\r\n    },\r\n    toggleTheme () {\r\n      this.isDarkTheme = !this.isDarkTheme;\r\n      localStorage.setItem('isDarkTheme', this.isDarkTheme);\r\n      // 调用 main.js 中定义的全局 window.setTheme (如果有的话)，或手动触发\r\n      if (window.setTheme) {\r\n        window.setTheme(this.isDarkTheme ? 'dark' : 'light');\r\n      }\r\n    },\r\n    handlePrivateKeyUpload(file) {\r\n      this.sshInfo.password = ''\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        this.sshInfo.privateKey = e.target.result\r\n        this.privateKeyFileName = file.name\r\n      }\r\n      reader.readAsText(file)\r\n      return false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.top-right-wrapper {\r\n  position: absolute;\r\n  top: 25px;\r\n  right: 30px;\r\n  z-index: 10;\r\n  display: flex;\r\n  gap: 15px;\r\n}\r\n\r\n.icon-btn, .theme-switch {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n  background-color: var(--switch-bg);\r\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\r\n}\r\n\r\n.icon-btn:hover, .theme-switch:hover {\r\n  filter: brightness(0.9);\r\n}\r\n\r\n.icon-btn i, .theme-switch i {\r\n  font-size: 20px;\r\n  color: var(--icon-color);\r\n  transition: color 0.3s;\r\n}\r\n\r\n/* 样式穿透修改 ::v-deep -> :deep() */\r\n.login-container :deep(.el-input__wrapper) {\r\n  font-size: medium;\r\n  border-radius: 10px;\r\n  background: hsl(0deg 0% 100% / 5%);\r\n  backdrop-filter: blur(5px);\r\n  -webkit-backdrop-filter: blur(5px);\r\n  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.3); /* Element Plus 输入框边框改用 boxShadow */\r\n  transition: all 0.3s;\r\n  color: #333;\r\n}\r\n/* Element Plus input 内部结构变化 */\r\n.login-container :deep(.el-input__inner) {\r\n  color: #333;\r\n}\r\n\r\n.login-container :deep(.el-input__wrapper:hover) {\r\n    box-shadow: 0 0 0 1px #409eff;\r\n}\r\n\r\n.login-container :deep(.el-input__wrapper.is-focus) {\r\n  box-shadow: 0 0 0 1px #409eff !important; \r\n}\r\n\r\n.login-container.dark-theme :deep(.el-input__wrapper) {\r\n  background: hsl(0deg 0% 100% / 5%);\r\n  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2);\r\n}\r\n.login-container.dark-theme :deep(.el-input__inner) {\r\n    color: #fff;\r\n}\r\n\r\n.login-container {\r\n  display: flex;\r\n  min-height: 100vh;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background: var(--bg-color);\r\n  background-image: var(--bg-image);\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  position: relative;\r\n  padding-top: 5vh;\r\n  padding-bottom: 60px;\r\n  transition: background-color 0.3s, color 0.3s, background-image 0.3s;\r\n  overflow-y: auto;\r\n}\r\n\r\n.card {\r\n  background: var(--card-bg);\r\n  backdrop-filter: blur(10px);\r\n  -webkit-backdrop-filter: blur(10px);\r\n  box-shadow: var(--shadow);\r\n  border-radius: 20px;\r\n  padding-top: 15px;\r\n  padding-bottom: 25px;\r\n  width: 100%;\r\n  max-width: 42rem;\r\n  position: relative;\r\n  transition: background-color 0.3s, box-shadow 0.3s, backdrop-filter 0.3s;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.form-grid :deep(.el-form-item__label) {\r\n  padding-bottom: 0;\r\n  font-size: 15px;\r\n  color: var(--text-color);\r\n  line-height: 30px;\r\n}\r\n\r\n.form-grid :deep(.el-button) {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  padding: 0.9rem 1rem;\r\n  border-radius: 10px;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.login-container :deep(.upload-btn) {\r\n  background: var(--primary);\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 10px;\r\n  height: 32px; /* 模拟 input 高度 */\r\n  border-radius: 4px 0 0 4px;\r\n}\r\n\r\n.upload-flex-row {\r\n    display: flex;\r\n    align-items: center;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n}\r\n\r\n.login-container :deep(.upload-filename) {\r\n  background: hsl(0deg 0% 100% / 15%);\r\n  color: #333;\r\n  padding: 0 10px;\r\n  line-height: 32px;\r\n  font-size: 12px;\r\n  border-radius: 0 4px 4px 0;\r\n}\r\n.login-container.dark-theme :deep(.upload-filename) {\r\n  color: #fff !important;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .card{ width: 98% !important; }\r\n  .form-grid :deep(.el-button) {\r\n    font-size: 0.9rem !important;\r\n    padding: 0.7rem 0.8rem !important;\r\n    margin: 0 2px !important;\r\n  }\r\n  .login-container { padding-bottom: 120px !important; }\r\n  .top-right-wrapper { top: 15px; right: 15px; }\r\n}\r\n\r\n.footer {\r\n  position: absolute;\r\n  bottom: 8px;\r\n  text-align: center;\r\n  width: 100%;\r\n  color: var(--text-color);\r\n  opacity: 0.6;\r\n}\r\n.footer a { color: #fefefe; text-decoration: none; }\r\n.footer a:hover { color: #05d899; }\r\n\r\n/* Variables */\r\n.login-container {\r\n  --bg-color: #ffff;\r\n  --bg-image: url('~@/assets/img/bg_light.webp');\r\n  --card-bg: hsl(0deg 0% 100% / 15%);\r\n  --text-color: #3b3d3d;\r\n  --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  --success: #13af54;\r\n  --success-hover: #0e8942; \r\n  --danger: #d63031;\r\n  --danger-hover: #b247c2; \r\n  --primary: #409eff;\r\n  --primary-hover: #0f9281; \r\n  --switch-bg: #f0f0f0;\r\n  --icon-color: #232323;\r\n}\r\n\r\n.login-container.dark-theme {\r\n  --bg-color: #ffffff;\r\n  --bg-image: url('~@/assets/img/bg_dark.webp');\r\n  --card-bg: hsl(0deg 0% 100% / 5%);\r\n  --text-color: #e0e0e0;\r\n  --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\r\n  --switch-bg: #333333;\r\n  --icon-color: #f5f5f5;\r\n}\r\n\r\n.el-button--success { background-color: var(--success); border-color: var(--success); color: white; }\r\n.el-button--danger { background-color: var(--danger); border-color: var(--danger); color: white; }\r\n.el-button--primary { background-color: var(--primary); border-color: var(--primary); color: white; }\r\n/* Element Plus 按钮默认样式微调 */\r\n</style>\r\n\r\n<style>\r\n/* 全局样式覆盖（针对 Dialog 内部） */\r\n\r\n/* Deep Dialog Styles (深色弹窗样式适配) */\r\n.dark-dialog.el-dialog { \r\n  background: #2d2d2d; \r\n}\r\n\r\n.dark-dialog .el-dialog__title { \r\n  color: #fff; \r\n}\r\n\r\n/* 表格透明化 */\r\n.dark-dialog .el-table { \r\n  background-color: transparent !important;\r\n  color: #e0e0e0 !important;\r\n  --el-table-bg-color: transparent !important;\r\n  --el-table-tr-bg-color: transparent !important;\r\n  --el-table-header-bg-color: transparent !important;\r\n  --el-table-row-hover-bg-color: #505050 !important;\r\n  --el-table-border-color: #444 !important;\r\n}\r\n\r\n.dark-dialog .el-table th, \r\n.dark-dialog .el-table tr { \r\n  background-color: transparent !important;\r\n  border-bottom: 1px solid #444 !important;\r\n}\r\n\r\n.dark-dialog .el-table--enable-row-hover .el-table__body tr:hover > td { \r\n  background-color: #505050 !important;\r\n  color: #ffffff !important;           \r\n}\r\n\r\n.dark-dialog .el-table::before {\r\n  height: 0px !important;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}