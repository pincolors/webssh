{"ast":null,"code":"import \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport Terminal from '@/components/Terminal.vue';\nexport default {\n  components: {\n    Terminal\n  },\n  beforeCreate() {\n    let {\n      hostname,\n      port,\n      username,\n      password,\n      command,\n      privateKey,\n      passphrase,\n      useKey\n    } = this.$route.query;\n    // 解码\n    if (hostname) hostname = decodeURIComponent(hostname);\n    if (username) username = decodeURIComponent(username);\n    if (password) {\n      try {\n        password = atob(password);\n      } catch (e) {\n        password = decodeURIComponent(password);\n      }\n    }\n    if (command) command = decodeURIComponent(command);\n    if (privateKey) privateKey = decodeURIComponent(privateKey);\n    if (passphrase) passphrase = decodeURIComponent(passphrase);\n\n    // 如果是密钥登录，从 sessionStorage 读取完整 sshInfo\n    if (useKey) {\n      const savedInfo = sessionStorage.getItem('sshInfo');\n      if (savedInfo) {\n        const info = JSON.parse(savedInfo);\n        hostname = info.hostname;\n        port = info.port;\n        username = info.username;\n        password = info.password;\n        command = info.command;\n        privateKey = info.privateKey;\n        passphrase = info.passphrase;\n      }\n    } else if (!hostname || !username || !password && !privateKey) {\n      // fallback 到 sessionStorage\n      const savedInfo = sessionStorage.getItem('sshInfo');\n      if (savedInfo) {\n        const info = JSON.parse(savedInfo);\n        hostname = info.hostname;\n        port = info.port;\n        username = info.username;\n        password = info.password;\n        command = info.command;\n        privateKey = info.privateKey;\n        passphrase = info.passphrase;\n      }\n    }\n    if (hostname && username && (password || privateKey)) {\n      this.$store.commit('SET_SSH', {\n        hostname,\n        port: Number(port) || 22,\n        username,\n        password,\n        command,\n        privateKey,\n        passphrase\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}